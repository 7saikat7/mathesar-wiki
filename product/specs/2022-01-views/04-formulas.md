---
title: 04. Formulas
description: A list of initial formulas supported in Views
published: true
date: 2022-02-22T05:00:52.741Z
tags: 
editor: markdown
dateCreated: 2022-02-04T03:33:53.715Z
---

# Structure

Formulas have the following attributes:
- **Name**: A unique human-readable name
- **Description**: A description of what the formula does
- **Variables Accepted**: This is the list of variables needed for a formula to work. Variables have the following attributes:
    - **Name**: A unique name (within the formula)
    - **Description**: A description of how the variable fits into the formula
    - **Type**: The type of data accepted.
    - **Value**: The value that this variable is set to.
- **Data Editable?**: Whether data in cells generated by this formula is editable.
- **Data Type**: The data type of the column that applying this formula will result in.

## Variable Types
Variables can accept the following types of data:
- **Literal**: Literals are a static value, like a number of a string.
    - Literal variable types should include a list of DB [Data Types](/en/product/concepts/data-types) they accept.
- **Column Reference**: A reference to a column. This can be either from a table or a previous column that has been added to the query.
    - If there are multiple ways to get to the column (i.e. there are multiple relationships between the query's reference table and the column), then the column reference should also include the relationship to use.
    - Some formulas might be limited to column references of the following types:
        - Single related records
        - Multiple related records
            - Column references to multiple related records also accept filters, in case the column only needs to use a subset of the related records
- **Regular Expression Pattern**: Some formulas operate on regex patterns.

> More variable types will be added as more formulas are added.
{.is-warning}

## Categorizing Formulas
In order to make finding the right formula easier, we should categorize formulas by the type of variable they accept.
- For example, if the user is trying to add a formula to a `DATE` column, we would only show them the formulas that accept literal values of the `DATE` data type.
- When the user starts by adding a formula column, we can show the types of data a formula accepts to help them find the formula easier. See below for a _very_ rough representation of one way to do this.

![view_builder_4.png](/view_builder_4.png)

## Editing Formula Data
When a query is turned into a View, we will allow users to edit data from the View in some cases. Each formula that is editable will define its own editing behavior, but here are some general guidelines:
- Formulas that transform the original data don't result in editable data.
    - e.g. if we apply a "Extract Year" formula to a `DATE` column to transform, say, `2020-01-03` into `2020`, then the `2020` will not be editable.
    - e.g. if we apply a "Count Related" formula to count the number of genres a movie has, we will not be able to edit the count.
- Formulas that directly represent the original data _may_ be editable.
   - e.g. if we apply a "List Related" formula to list the genres related to a given movie, we can add and remove genres to that list, which will create/delete records in the appropriate underlying tables.
       - in the future, we may also support editing the genre names themselves.

# List of Formulas
This is a list of view formulas that we should support in the alpha release of Mathesar, categorized into types.

- [Record Aggregations *Formulas that aggregate multiple related records*](/en/product/specs/2022-01-views/04-formulas/record-aggregations)
{.links-list}

> More formulas will be added soon.
{.is-warning}
